<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>To-Do List</title>
  </head>  
  <body class="bg">
    <!-- <h1 class="text-center" id="head">To-Do list</h1> -->
    <div class="waviy text-center">
        <span style="--i:1">T</span>
        <span style="--i:2">O</span>
        <span style="--i:3">-</span>
        <span style="--i:4">D</span>
        <span style="--i:5">O</span>
        <span style="--i:6"> </span>
        <span style="--i:7">L</span>
        <span style="--i:8">I</span>
        <span style="--i:9">S</span>
        <span style="--i:10">T</span>
       </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->

    <link rel="stylesheet" href="style.css">
    <script src="utli.js"></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
     
    <!-- <div class="card text-center" style="width: 18rem;" >
        <div class="card-body">
          <h5 class="card-title">Title</h5>
          <input type="text" class="form-control" placeholder="Add an item to the list" id="title" >
          <h5 class="card-title">Description</h5>
          <textarea class="form-control" placeholder="Description" id="description" style="height: 100px"></textarea>
          <button type="submit" class="btn btn-primary" id="add">Add the item to the list</button>
         
        </div>
      </div> -->
      
      <!-- <div class="card " style="width: 18rem;"> -->
        <div class="container my-4">
          <h3 class="text-center" >Title</h3>
          <input type="text" class="form-control" placeholder="Add an item" id="title" >
        
        </div>
        <div class="container my-4">
            <h3 class="text-center" >Description</h3>
            
            <textarea class="form-control" placeholder="Description" id="description" style="height: 100px"></textarea>
          
            <div class="my-4 text-center">
                <button type="submit" class="btn btn-light btn-outline-secondary" id="add">Add the item to the list</button>
            </div>
        </div>
    
   </div>
   <div class="container1">
     <div class="text-center" id="ite" >Your Items</div>
     <table class="table">
       <thead>
         <tr>
           <th scope="col">S.No.</th>
           <th scope="col" >Title</th>
           <th scope="col" class="text-center">Description</th>
           <!-- <th scope="col">Status</th> -->
           <th scope="col" >Actions</th>
         </tr>
       </thead>
       <tbody id="tableBody">
         <tr>
           <th scope="row"></th>
           <td></td>
           <td></td>
           <!-- <td  id="checkbox"></td> -->
           <td class="text-center"></td>
         </tr>
         
        
       
       </tbody>
     </table>
     </div>
   </div> 
   </div> 
</div>
</div>
    <script>
       

        function getandupdate()
        {
           
            console.log("Updating");
            ttl=document.getElementById('title').value;
            desc=document.getElementById('description').value; 
           // checkbox.addEventListener("checked", function(){ ttl.style.textDecoration = "line-through";});
            if(localStorage.getItem('itemsJson')==null)
            {
                 itemJsonArray= [];
                 itemJsonArray.push([ttl,desc])
                 localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
            }
            else
            {
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
                itemJsonArray.push([ttl,desc]);
                localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
                
            } 
            let tableBody = document.getElementById("tableBody");
                let str = "";
                itemJsonArray.forEach((element, index) => {
                    
                    str += `
                    <tr>
                    <th scope="row">${index +1}</th>
                    <td>${element[0]}</td>
                    <td>${element[1]}</td> 
                   

                    <td><button id="btn" class="btn btn-sm btn-light btn-outline-danger" onclick="deleted(${index})">Delete</button></td> 
                    </tr>`; 
                     // <td ><input type="checkbox" class="check-box" onclick = "cancel(${index})"></td>
                    tableBody.innerHTML = str;
                    
                    
                });
  
        }
            function update()
            {
                console.log("Updating");
           
            if(localStorage.getItem('itemsJson')==null)
            {
                 itemJsonArray= [];
               
                 localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
            }
            else{
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
                
                localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
                
            }
            let tableBody = document.getElementById("tableBody");
                let str = "";
                itemJsonArray.forEach((element, index) => {
                    
                    str += `
                    <tr>
                    <th scope="row">${index +1}</th>
                    <td>${element[0]}</td> name
                    <td>${element[1]}</td> description
                    element[2] = isChecked: boolean;
    
                   
                   
                
                    <td><button id="btn" class="btn btn-sm btn-light btn-outline-danger" onclick="deleted(${index})">Delete</button></td> 
                    </tr>`; 
                    //<td><input type="checkbox" class="check-box" onclick = "cancel(${index})"></td>
                    tableBody.innerHTML = str;

                    
                    
                });
            
            }
            


            

            
            function deleted(indexitem)
                  {
                      console.log("delete", indexitem);
                      itemJsonArrayStr = localStorage.getItem('itemsJson')
                      itemJsonArray = JSON.parse(itemJsonArrayStr);
                      itemJsonArray.splice(indexitem,1);
                      localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
                      update();


                  }
            // function cancel(indexitem)
            //       {
            //           console.log("cancel", indexitem);
            //           itemJsonArrayStr = localStorage.getItem('itemsJson')
            //           itemJsonArray = JSON.parse(itemJsonArrayStr);
            //           indexitem.style.textDecoration = "line-through";
            //           localStorage.setItem('itemsJson',JSON.stringify(itemJsonArray))
            //           update();

            //       }      

                

        update();
        add=document.getElementById("add");
        add.addEventListener("click", getandupdate);
       
        

    </script> 
    
  </body>
</html>